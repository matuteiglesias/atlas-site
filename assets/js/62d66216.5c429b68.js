"use strict";(self.webpackChunkatlas_site=self.webpackChunkatlas_site||[]).push([[2956],{7567:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"pocket/pocket_loading_loop_datasets","title":"Loop para cargar datasets","description":"Prop\xf3sito","source":"@site/docs/pocket/loading_loop_datasets.md","sourceDirName":"pocket","slug":"/pocket/loading_loop_datasets","permalink":"/atlas-site/docs/pocket/loading_loop_datasets","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"etl","permalink":"/atlas-site/docs/tags/etl"},{"inline":true,"label":"pandas","permalink":"/atlas-site/docs/tags/pandas"},{"inline":true,"label":"io","permalink":"/atlas-site/docs/tags/io"},{"inline":true,"label":"loops","permalink":"/atlas-site/docs/tags/loops"}],"version":"current","frontMatter":{"id":"pocket_loading_loop_datasets","title":"Loop para cargar datasets","slug":"/pocket/loading_loop_datasets","module":"apendice-pocket","version":"0.1.0","status":"draft","owners":["atlas-core"],"tags":["etl","pandas","io","loops"],"source_repo":"<repo-url>","source_path":"docs/pocket/loading_loop_datasets.md"},"sidebar":"tutorialSidebar","previous":{"title":"Timestamps \u2192 JSON (encoder + checklist)","permalink":"/atlas-site/docs/pocket/json_timestamps_encoder"},"next":{"title":"log_message + QA de merges","permalink":"/atlas-site/docs/pocket/log_message_merge_qc"}}');var t=a(4848),o=a(8453);const i={id:"pocket_loading_loop_datasets",title:"Loop para cargar datasets",slug:"/pocket/loading_loop_datasets",module:"apendice-pocket",version:"0.1.0",status:"draft",owners:["atlas-core"],tags:["etl","pandas","io","loops"],source_repo:"<repo-url>",source_path:"docs/pocket/loading_loop_datasets.md"},r=void 0,l={},c=[{value:"Prop\xf3sito",id:"prop\xf3sito",level:2},{value:"Variante 1 \u2014 tiempo fijo (ej. T=4)",id:"variante-1--tiempo-fijo-ej-t4",level:2},{value:"Variante 2 \u2014 tiempos combinados (2\u20134 a\xf1os)",id:"variante-2--tiempos-combinados-24-a\xf1os",level:2},{value:"Consejos",id:"consejos",level:2},{value:"QA m\xednimo",id:"qa-m\xednimo",level:2}];function d(e){const s={code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"prop\xf3sito",children:"Prop\xf3sito"}),"\n",(0,t.jsxs)(s.p,{children:["Construir rutas a partir de ",(0,t.jsx)(s.strong,{children:"combinaciones"})," (fuente/unidad/tiempo), validar existencia y cargar ",(0,t.jsx)(s.strong,{children:"muestras"})," (",(0,t.jsx)(s.code,{children:"nrows"}),") en un diccionario ",(0,t.jsx)(s.code,{children:"{filename: DataFrame}"})," para inspecci\xf3n r\xe1pida. "]}),"\n",(0,t.jsx)(s.h2,{id:"variante-1--tiempo-fijo-ej-t4",children:"Variante 1 \u2014 tiempo fijo (ej. T=4)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'import pandas as pd, os\n\nbase_dir = "/path/reg_data"\nsources = ["acled", "afb_places", "CN", "WBad", "WBkg"]\nunits = ["a1", "a2", "a3", "l1", "l2", "l3"]\nyears = [2000, 2001]\n\ndatasets = {}\nfor src in sources:\n    for unit in units:\n        for yr in years:\n            fn = f"agg_{src}_africa_{unit}_4y{yr}_year.csv"\n            fp = os.path.join(base_dir, fn)\n            if os.path.exists(fp):\n                datasets[fn] = pd.read_csv(fp, nrows=5)\n'})}),"\n",(0,t.jsx)(s.h2,{id:"variante-2--tiempos-combinados-24-a\xf1os",children:"Variante 2 \u2014 tiempos combinados (2\u20134 a\xf1os)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'import pandas as pd, os\n\nbase_dir = "/path/reg_data"\nsources = ["acled", "afb_places", "CN", "WBad", "WBkg"]\nunits = ["a1", "a2", "a3", "l1", "l2", "l3"]\ntimes = [f"{i}y{yr}" for i in range(2, 5) for yr in [2000, 2001]]\n\ndatasets = {}\nfor src in sources:\n    for unit in units:\n        for t in times:\n            fn = f"agg_{src}_africa_{unit}_{t}_year.csv"\n            fp = os.path.join(base_dir, fn)\n            if os.path.exists(fp):\n                datasets[fn] = pd.read_csv(fp, nrows=5)\n'})}),"\n",(0,t.jsx)(s.h2,{id:"consejos",children:"Consejos"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"nrows"})," acelera iteraci\xf3n inicial; al escalar, considerar ",(0,t.jsx)(s.strong,{children:"dtypes"})," y ",(0,t.jsx)(s.strong,{children:"usecols"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Si la carpeta es grande, prefer\xed ",(0,t.jsx)(s.code,{children:"glob"})," para listar y filtrar por patr\xf3n."]}),"\n",(0,t.jsxs)(s.li,{children:["Para testear pipelines, export\xe1 ",(0,t.jsx)(s.em,{children:"samples"})," representativos y us\xe1 estos loops como ",(0,t.jsx)(s.strong,{children:"smoke tests"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"qa-m\xednimo",children:"QA m\xednimo"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"len(datasets)"})," coincide con cantidad de archivos ",(0,t.jsx)(s.strong,{children:"existentes"})," que matchean patr\xf3n."]}),"\n",(0,t.jsxs)(s.li,{children:["Validar columnas m\xednimas esperadas por fuente/unidad (asserts con ",(0,t.jsx)(s.code,{children:"set.issubset"}),")."]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,a)=>{a.d(s,{R:()=>i,x:()=>r});var n=a(6540);const t={},o=n.createContext(t);function i(e){const s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);
"use strict";(self.webpackChunkatlas_site=self.webpackChunkatlas_site||[]).push([[6062],{907:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>n,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"pocket/pocket_find_sed_html","title":"Batch-update HTML (find+sed)","description":"Prop\xf3sito","source":"@site/docs/pocket/find_sed_html.md","sourceDirName":"pocket","slug":"/pocket/find_sed_html","permalink":"/atlas-site/docs/pocket/find_sed_html","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"cli","permalink":"/atlas-site/docs/tags/cli"},{"inline":true,"label":"html","permalink":"/atlas-site/docs/tags/html"},{"inline":true,"label":"find","permalink":"/atlas-site/docs/tags/find"},{"inline":true,"label":"sed","permalink":"/atlas-site/docs/tags/sed"},{"inline":true,"label":"batch-update","permalink":"/atlas-site/docs/tags/batch-update"}],"version":"current","frontMatter":{"id":"pocket_find_sed_html","title":"Batch-update HTML (find+sed)","slug":"/pocket/find_sed_html","module":"apendice-pocket","version":"0.1.0","status":"draft","owners":["atlas-core"],"tags":["cli","html","find","sed","batch-update"],"source_repo":"https://github.com/matuteiglesias/atlas-site","source_path":"docs/pocket/find_sed_html.md"},"sidebar":"tutorialSidebar","previous":{"title":"DataFrames con barras (Styler)","permalink":"/atlas-site/docs/pocket/dataframe_styling"},"next":{"title":"Scatter + box ponderado (overlay)","permalink":"/atlas-site/docs/pocket/geo_overlay_scatter_box"}}');var o=a(4848),i=a(8453);const n={id:"pocket_find_sed_html",title:"Batch-update HTML (find+sed)",slug:"/pocket/find_sed_html",module:"apendice-pocket",version:"0.1.0",status:"draft",owners:["atlas-core"],tags:["cli","html","find","sed","batch-update"],source_repo:"https://github.com/matuteiglesias/atlas-site",source_path:"docs/pocket/find_sed_html.md"},l=void 0,c={},d=[{value:"Prop\xf3sito",id:"prop\xf3sito",level:2},{value:"Recetas confirmadas",id:"recetas-confirmadas",level:2},{value:"1) Reemplazo in-place (todas las <code>.html</code>)",id:"1-reemplazo-in-place-todas-las-html",level:3},{value:"2) Cambiar enlaces CSS/JS de Mapbox (dos pasos)",id:"2-cambiar-enlaces-cssjs-de-mapbox-dos-pasos",level:3},{value:"Consejos operativos",id:"consejos-operativos",level:2},{value:"QA m\xednimo",id:"qa-m\xednimo",level:2}];function r(e){const s={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.h2,{id:"prop\xf3sito",children:"Prop\xf3sito"}),"\n",(0,o.jsxs)(s.p,{children:["Hacer ",(0,o.jsx)(s.strong,{children:"reemplazos masivos"})," en ",(0,o.jsx)(s.code,{children:".html"})," (URLs, versiones de librer\xedas) con seguridad."]}),"\n",(0,o.jsx)(s.h2,{id:"recetas-confirmadas",children:"Recetas confirmadas"}),"\n",(0,o.jsxs)(s.h3,{id:"1-reemplazo-in-place-todas-las-html",children:["1) Reemplazo in-place (todas las ",(0,o.jsx)(s.code,{children:".html"}),")"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"find . -name '*.html' -type f -exec sed -i 's|api.mapbox.com/mapbox-gl-js/v2.4.1|api.mapbox.com/mapbox-gl-js/v3.0.0|g' {} +\n"})}),"\n",(0,o.jsxs)(s.p,{children:["Sustituye ",(0,o.jsx)(s.em,{children:"todas"})," las apariciones y modifica los archivos en sitio. ",(0,o.jsx)(s.strong,{children:"Hac\xe9 backup"})," antes. "]}),"\n",(0,o.jsx)(s.h3,{id:"2-cambiar-enlaces-cssjs-de-mapbox-dos-pasos",children:"2) Cambiar enlaces CSS/JS de Mapbox (dos pasos)"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:'find . -type f -name "*.html" -exec sed -i "s|https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css|https://api.mapbox.com/mapbox-gl-js/v3.0.0-beta.1/mapbox-gl.css|g" {} +\nfind . -type f -name "*.html" -exec sed -i "s|https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js|https://api.mapbox.com/mapbox-gl-js/v3.0.0-beta.1/mapbox-gl.js|g" {} +\n'})}),"\n",(0,o.jsx)(s.p,{children:"\xdatil para congelar versiones o testear betas de forma consistente. "}),"\n",(0,o.jsx)(s.h2,{id:"consejos-operativos",children:"Consejos operativos"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Dry-run"}),": prob\xe1 primero en un subfolder o usa ",(0,o.jsx)(s.code,{children:"sed -n 's|old|new|gp' file.html"})," para ver difs."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Backup"}),": ",(0,o.jsx)(s.code,{children:"sed -i.bak 's|old|new|g' file.html"})," deja ",(0,o.jsx)(s.code,{children:"file.html.bak"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Si el cambio toca ",(0,o.jsx)(s.strong,{children:"tokens/URLs"})," de automatizaci\xf3n, document\xe1 en ",(0,o.jsx)(s.code,{children:"operacion/ci_github_actions.md"})," (runbook de secrets/dispatch)."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"qa-m\xednimo",children:"QA m\xednimo"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Contabiliz\xe1 archivos afectados (",(0,o.jsx)(s.code,{children:"| wc -l"}),")."]}),"\n",(0,o.jsxs)(s.li,{children:["Grep final para verificar que ",(0,o.jsx)(s.strong,{children:"no quedan"})," ocurrencias viejas."]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(r,{...e})}):r(e)}},8453:(e,s,a)=>{a.d(s,{R:()=>n,x:()=>l});var t=a(6540);const o={},i=t.createContext(o);function n(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);
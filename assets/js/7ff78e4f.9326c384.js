"use strict";(self.webpackChunkatlas_site=self.webpackChunkatlas_site||[]).push([[5690],{1720:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"operacion/operacion_ci_github_actions","title":"CI/CD \u2014 GitHub Actions (tokens, secrets, dispatch, runbook 401/403)","description":"1) Tokens y permisos","source":"@site/docs/operacion/ci_github_actions.md","sourceDirName":"operacion","slug":"/operacion/ci_github_actions","permalink":"/docs/operacion/ci_github_actions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/operacion/ci_github_actions.md","tags":[{"inline":true,"label":"ops","permalink":"/docs/tags/ops"},{"inline":true,"label":"github","permalink":"/docs/tags/github"},{"inline":true,"label":"actions","permalink":"/docs/tags/actions"},{"inline":true,"label":"tokens","permalink":"/docs/tags/tokens"},{"inline":true,"label":"secrets","permalink":"/docs/tags/secrets"},{"inline":true,"label":"dispatch","permalink":"/docs/tags/dispatch"},{"inline":true,"label":"403","permalink":"/docs/tags/403"},{"inline":true,"label":"401","permalink":"/docs/tags/401"}],"version":"current","frontMatter":{"id":"operacion_ci_github_actions","title":"CI/CD \u2014 GitHub Actions (tokens, secrets, dispatch, runbook 401/403)","slug":"/operacion/ci_github_actions","module":"operacion","version":"0.1.0","status":"draft","owners":["atlas-core"],"tags":["ops","github","actions","tokens","secrets","dispatch","403","401"],"source_repo":"<repo-url>","source_path":"docs/operacion/ci_github_actions.md"},"sidebar":"tutorialSidebar","previous":{"title":"Operaci\xf3n","permalink":"/docs/category/operaci\xf3n"},"next":{"title":"Operaci\xf3n \u2014 estructuras de equipo para proyectos de datos","permalink":"/docs/operacion/equipos_y_roles"}}');var r=o(4848),i=o(8453);const t={id:"operacion_ci_github_actions",title:"CI/CD \u2014 GitHub Actions (tokens, secrets, dispatch, runbook 401/403)",slug:"/operacion/ci_github_actions",module:"operacion",version:"0.1.0",status:"draft",owners:["atlas-core"],tags:["ops","github","actions","tokens","secrets","dispatch",403,401],source_repo:"<repo-url>",source_path:"docs/operacion/ci_github_actions.md"},c=void 0,a={},l=[{value:"1) Tokens y permisos",id:"1-tokens-y-permisos",level:2},{value:"2) Secrets",id:"2-secrets",level:2},{value:"3) Triggers entre repos",id:"3-triggers-entre-repos",level:2},{value:"4) Runbook de errores (401/403)",id:"4-runbook-de-errores-401403",level:2},{value:"Contrato m\xednimo",id:"contrato-m\xednimo",level:2}];function d(e){const s={code:"code",em:"em",h2:"h2",li:"li",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"1-tokens-y-permisos",children:"1) Tokens y permisos"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"GITHUB_TOKEN"})," vs ",(0,r.jsx)(s.strong,{children:"PAT"}),": cu\xe1ndo usar cada uno; scopes requeridos ",(0,r.jsx)(s.code,{children:"repo"})," + ",(0,r.jsx)(s.code,{children:"workflow"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Header"}),": ",(0,r.jsx)(s.code,{children:"Authorization: token ..."})," (o ",(0,r.jsx)(s.code,{children:"Bearer"})," si tu pol\xedtica lo exige). "]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"2-secrets",children:"2) Secrets"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Secret name"})," \u2260 valor del token; c\xf3mo referenciarlo en YAML (",(0,r.jsx)(s.code,{children:"secrets.MI_PAT"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:["Gesti\xf3n/listado de nombres de secrets con ",(0,r.jsx)(s.code,{children:"gh secret list"}),". "]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"3-triggers-entre-repos",children:"3) Triggers entre repos"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Preferencia: ",(0,r.jsx)(s.code,{children:"repository_dispatch"})," si ",(0,r.jsx)(s.strong,{children:"mismo owner"}),"; alternativa ",(0,r.jsx)(s.code,{children:"workflow_dispatch"})," con ",(0,r.jsx)(s.code,{children:"dispatches"}),". Reglas de ownership/permisos."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"4-runbook-de-errores-401403",children:"4) Runbook de errores (401/403)"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"401 Bad credentials"}),": nombre del secret, scopes, token expirado."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"403 Resource not accessible / Forbidden"}),": owner distinto, branch protection, pol\xedticas org."]}),"\n",(0,r.jsxs)(s.li,{children:["Paso a paso con ",(0,r.jsx)(s.code,{children:"curl"})," y Octokit para aislar causa. "]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"contrato-m\xednimo",children:"Contrato m\xednimo"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Secrets"}),": ",(0,r.jsx)(s.code,{children:"GH_AUTH_TOKEN"})," (PAT con ",(0,r.jsx)(s.code,{children:"repo,workflow"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Workflow"}),": job \u201cnotify-atlas\u201d con POST ",(0,r.jsx)(s.code,{children:"dispatches"})," + payload ",(0,r.jsx)(s.code,{children:"event_type"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Verificaci\xf3n"}),": Actions de origen y destino marcan ",(0,r.jsx)(s.em,{children:"green"})," y evento recibido. "]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,o)=>{o.d(s,{R:()=>t,x:()=>c});var n=o(6540);const r={},i=n.createContext(r);function t(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);
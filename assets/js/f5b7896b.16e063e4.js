"use strict";(self.webpackChunkatlas_site=self.webpackChunkatlas_site||[]).push([[1716],{4770:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"metodos/metodos_modeling_toolkit_pobreza","title":"Modeling toolkit \u2014 regresi\xf3n lineal simple para pobreza","description":"Utilidad m\xednima (pero rigurosa) para ajustes lineales orientados a series de pobreza. Sirve para exploraci\xf3n, sanity checks y como baseline reproducible \u2014no reemplaza los modelos del pipeline principal. El contexto y motivaci\xf3n vienen del an\xe1lisis con Censo 2010, integraci\xf3n geoespacial y m\xe9tricas derivadas.","source":"@site/docs/metodos/modeling_toolkit_pobreza.md","sourceDirName":"metodos","slug":"/metodos/modeling_toolkit_pobreza","permalink":"/atlas-site/docs/metodos/modeling_toolkit_pobreza","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/metodos/modeling_toolkit_pobreza.md","tags":[{"inline":true,"label":"modeling","permalink":"/atlas-site/docs/tags/modeling"},{"inline":true,"label":"regression","permalink":"/atlas-site/docs/tags/regression"},{"inline":true,"label":"poverty","permalink":"/atlas-site/docs/tags/poverty"},{"inline":true,"label":"emae","permalink":"/atlas-site/docs/tags/emae"},{"inline":true,"label":"ripte","permalink":"/atlas-site/docs/tags/ripte"},{"inline":true,"label":"cba","permalink":"/atlas-site/docs/tags/cba"},{"inline":true,"label":"ipc","permalink":"/atlas-site/docs/tags/ipc"}],"version":"current","frontMatter":{"id":"metodos_modeling_toolkit_pobreza","title":"Modeling toolkit \u2014 regresi\xf3n lineal simple para pobreza","slug":"/metodos/modeling_toolkit_pobreza","module":"metodos","version":"0.1.0","status":"draft","owners":["atlas-core"],"tags":["modeling","regression","poverty","emae","ripte","cba","ipc"],"source_repo":"<repo-url>","source_path":"docs/metodos/modeling_toolkit_pobreza.md"},"sidebar":"tutorialSidebar","previous":{"title":"Integraci\xf3n geo \u2014 IGN + Censo, claves y joins","permalink":"/atlas-site/docs/metodos/geo_integration_methods"},"next":{"title":"Notebooks & refactor \u2014 estructura, modularizaci\xf3n y contratos","permalink":"/atlas-site/docs/metodos/notebooks_estructura_refactor"}}');var r=n(4848),a=n(8453);const o={id:"metodos_modeling_toolkit_pobreza",title:"Modeling toolkit \u2014 regresi\xf3n lineal simple para pobreza",slug:"/metodos/modeling_toolkit_pobreza",module:"metodos",version:"0.1.0",status:"draft",owners:["atlas-core"],tags:["modeling","regression","poverty","emae","ripte","cba","ipc"],source_repo:"<repo-url>",source_path:"docs/metodos/modeling_toolkit_pobreza.md"},l=void 0,t={},c=[{value:"1) Especificaci\xf3n del modelo (baseline)",id:"1-especificaci\xf3n-del-modelo-baseline",level:2},{value:"2) Contrato m\xednimo (inputs/outputs)",id:"2-contrato-m\xednimo-inputsoutputs",level:2},{value:"3) NaNs: dos rutas operativas (eligir una)",id:"3-nans-dos-rutas-operativas-eligir-una",level:2},{value:"4) Preparaci\xf3n de datos (m\xednimos)",id:"4-preparaci\xf3n-de-datos-m\xednimos",level:2},{value:"5) Ajuste y diagn\xf3stico",id:"5-ajuste-y-diagn\xf3stico",level:2},{value:"6) Export y trazabilidad",id:"6-export-y-trazabilidad",level:2},{value:"7) L\xedmites y extensiones",id:"7-l\xedmites-y-extensiones",level:2},{value:"8) Errores comunes",id:"8-errores-comunes",level:2},{value:"9) Referencias cruzadas",id:"9-referencias-cruzadas",level:2}];function d(e){const s={blockquote:"blockquote",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["Utilidad m\xednima (pero rigurosa) para ",(0,r.jsx)(s.strong,{children:"ajustes lineales"})," orientados a series de pobreza. Sirve para exploraci\xf3n, ",(0,r.jsx)(s.em,{children:"sanity checks"})," y como baseline reproducible \u2014no reemplaza los modelos del pipeline principal. El contexto y motivaci\xf3n vienen del an\xe1lisis con Censo 2010, integraci\xf3n geoespacial y m\xe9tricas derivadas. "]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"1-especificaci\xf3n-del-modelo-baseline",children:"1) Especificaci\xf3n del modelo (baseline)"}),"\n",(0,r.jsxs)(s.p,{children:["Tomamos como dependiente una serie mensual/trimestral de ",(0,r.jsx)(s.strong,{children:"pobreza"})," (conteo o tasa). Predictoras: ",(0,r.jsx)(s.strong,{children:"empleo"})," (p\xfablico/privado/resto), ",(0,r.jsx)(s.strong,{children:"actividad"})," (EMAE, centrada) y ",(0,r.jsx)(s.strong,{children:"asequibilidad"})," (CB/RIPTE, IPC/RIPTE; centradas). Se\xf1ales esperadas: empleo \u2193 pobreza (coeficientes negativos), costo de vida relativo \u2191 pobreza (coeficientes positivos), actividad \u2191 \u2193 pobreza. "]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-latex",children:"\\[\n\\text{pobres} = C - \\alpha_1 (\\# \\text{emp\\_pub}) - \\alpha_2 (\\# \\text{emp\\_priv}) - \\alpha_3 (\\# \\text{emp\\_resto})\n+ \\beta \\, (\\text{EMAE} - \\overline{\\text{EMAE}})\n+ \\gamma \\left(\\frac{\\text{CB}}{\\text{RIPTE}} - \\overline{\\frac{\\text{CB}}{\\text{RIPTE}}}\\right)\n+ \\delta \\left(\\frac{\\text{IPC}}{\\text{RIPTE}} - \\overline{\\frac{\\text{IPC}}{\\text{RIPTE}}}\\right)\n\\]\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Racional econ\xf3mico y consideraciones: ",(0,r.jsx)(s.strong,{children:"interacciones"})," potenciales, ",(0,r.jsx)(s.strong,{children:"efectos rezagados"})," (p. ej. EMAE\u2192pobreza con retraso), y ",(0,r.jsx)(s.strong,{children:"multicolinealidad"})," (EMAE vs empleo); evaluar regularizaci\xf3n si hace falta. "]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"2-contrato-m\xednimo-inputsoutputs",children:"2) Contrato m\xednimo (inputs/outputs)"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Entradas"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Series ",(0,r.jsx)(s.code,{children:"indice_tiempo"})," (M o Q) alineadas y sin saltos; columnas:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Empleo_Publico"}),", ",(0,r.jsx)(s.code,{children:"Empleo_Privado"}),", ",(0,r.jsx)(s.code,{children:"Empleo_Resto"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"EMAE"})," (o desviaci\xf3n vs. media)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"CB_RIPTE"}),", ",(0,r.jsx)(s.code,{children:"IPC_RIPTE"})," (o versiones centradas)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"valor"})," (pobres: n\xfamero o tasa)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Opcional: lags p (",(0,r.jsx)(s.code,{children:"EMAE_lag1"}),", \u2026), ",(0,r.jsx)(s.em,{children:"dummies"})," estacionales."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Salida"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"fitted_valor"}),", ",(0,r.jsx)(s.code,{children:"residuo"}),", m\xe9tricas (",(0,r.jsx)(s.code,{children:"R2"}),", MAE, RMSE), y ",(0,r.jsx)(s.strong,{children:"coeficientes/intercepto"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Artefactos recomendados:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"model_linear.json"})," (coeficientes, signos, ",(0,r.jsx)(s.em,{children:"standard errors"})," si SM/OLS)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"fitted.parquet"})," (con fitted/residuos)"]}),"\n",(0,r.jsxs)(s.li,{children:["(opcional) ",(0,r.jsx)(s.code,{children:"model.pkl"})," scikit-learn, con ",(0,r.jsx)(s.em,{children:"pin"})," de versi\xf3n."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Garant\xedas"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Alineaci\xf3n temporal exacta; sin NaNs en ",(0,r.jsx)(s.strong,{children:"X"})," tras el preprocesado seleccionado (ver \xa73)."]}),"\n",(0,r.jsxs)(s.li,{children:["Trazabilidad: ",(0,r.jsx)(s.code,{children:"source_repo@commit"}),", ventana temporal y escalas usadas. "]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"3-nans-dos-rutas-operativas-eligir-una",children:"3) NaNs: dos rutas operativas (eligir una)"}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Evit\xe1 \u201cparches invisibles\u201d. Document\xe1 la pol\xedtica elegida en el notebook."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["Ruta A \u2014 ",(0,r.jsx)(s.code,{children:"dropna"})," expl\xedcito (simple y clara)"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Filtrar filas con NaNs en X e y; ajustar y reportar ",(0,r.jsx)(s.em,{children:"n"})," efectivo."]}),"\n",(0,r.jsx)(s.li,{children:"Ventaja: reproducible y transparente; Desventaja: reduce muestra si faltantes son frecuentes."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Snippet (A)"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from sklearn.linear_model import LinearRegression\nX_cols = ['Empleo_Privado','Empleo_Publico','Empleo_Resto',\n          'EMAE_Centered','CB_RIPTE_Centered','IPC_RIPTE_Centered']\ndf_ = dep_var.dropna(subset=X_cols + ['valor']).copy()\nX, y = df_[X_cols].values, df_['valor'].values\nm = LinearRegression().fit(X, y)\ndf_['fitted_valor'] = m.predict(X)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["Ruta B \u2014 ",(0,r.jsx)(s.em,{children:"masked arrays"})," (conservar estructura)"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Usar ",(0,r.jsx)(s.em,{children:"masked arrays"})," para ignorar NaNs al ajustar, sin reindexar."]}),"\n",(0,r.jsxs)(s.li,{children:["Ventaja: preserva el ",(0,r.jsx)(s.code,{children:"indice_tiempo"})," original; Desventaja: mayor complejidad."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Snippet (B)"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import numpy as np\nfrom numpy import ma\nfrom sklearn.linear_model import LinearRegression\n\nX = np.array([ma.masked_invalid(dep_var[c].values) for c in X_cols]).T\ny = ma.masked_invalid(dep_var['valor'].values)\nm = LinearRegression().fit(ma.compress_rows(X), ma.compressed(y))\nmask_valid = ~dep_var[X_cols].isnull().any(axis=1)\ndep_var.loc[mask_valid, 'fitted_valor'] = m.predict(ma.compress_rows(X))\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"4-preparaci\xf3n-de-datos-m\xednimos",children:"4) Preparaci\xf3n de datos (m\xednimos)"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Centrado"}),": restar la media a EMAE y a las razones CB/RIPTE, IPC/RIPTE (facilita interpretaci\xf3n de C). "]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Escalas"}),": usar unidades consistentes (empleo en miles, pobreza en miles o %)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Alineaci\xf3n"}),": si mezcl\xe1s mensual/Q, aplic\xe1 tu adaptador temporal (ver toolkit temporal)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Lags e interacciones (opcional)"}),": probar 1\u20132 rezagos en EMAE/empleo; evaluar interacci\xf3n ",(0,r.jsx)(s.code,{children:"EMAE \xd7 empleo"}),". "]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"5-ajuste-y-diagn\xf3stico",children:"5) Ajuste y diagn\xf3stico"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Ajuste (sklearn)"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from sklearn.metrics import r2_score, mean_absolute_error, mean_squared_error\nyhat = m.predict(X)\nR2 = r2_score(y, yhat); MAE = mean_absolute_error(y, yhat); RMSE = mean_squared_error(y, yhat, squared=False)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Chequeos m\xednimos"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Signos esperados"}),": \u03b1\u2019s (empleo) < 0; \u03b3, \u03b4 (CB/RIPTE, IPC/RIPTE) > 0; \u03b2 (EMAE) < 0. "]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Residuos"}),": evaluar patr\xf3n temporal (autocorrelaci\xf3n); si fuerte, considerar HAC o diferencias."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Multicolinealidad"}),": inspeccionar correlaciones/vif; considerar Ridge/Lasso si inestables. "]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Plot de ajuste"})," (opcional, para inspecci\xf3n r\xe1pida)"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import matplotlib.pyplot as plt\nax = dep_var.set_index('indice_tiempo')[['valor','fitted_valor']].plot()\nax.set_title('Valor vs Ajuste (lineal)'); ax.grid(True)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"6-export-y-trazabilidad",children:"6) Export y trazabilidad"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"fitted.parquet"})})," con ",(0,r.jsx)(s.code,{children:"indice_tiempo, valor, fitted_valor, residuo"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"model_linear.json"})}),": coeficientes, intercepto, m\xe9tricas, ventana temporal, columnas usadas."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"model.pkl"})})," (opcional) + ",(0,r.jsx)(s.em,{children:"pin"})," de scikit-learn."]}),"\n"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Mantener compatibilidad con pol\xedticas de exportaci\xf3n JSON (encoder de timestamps, escritura at\xf3mica). Ver ",(0,r.jsx)(s.em,{children:"metodos/etl_json_policies"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"7-l\xedmites-y-extensiones",children:"7) L\xedmites y extensiones"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Este baseline ",(0,r.jsx)(s.strong,{children:"no"})," modela estructura de error ni cambios de r\xe9gimen; \xfasalo como ",(0,r.jsx)(s.strong,{children:"\u201cterm\xf3metro\u201d"})," y para validar signos/ordenes de magnitud."]}),"\n",(0,r.jsxs)(s.li,{children:["Para producci\xf3n, migrar a: lags seleccionados por criterio, dummies estacionales, regularizaci\xf3n, y validaci\xf3n ",(0,r.jsx)(s.em,{children:"out-of-sample"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"8-errores-comunes",children:"8) Errores comunes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Ajustar con NaNs \u201csilenciosos\u201d \u2192 elegir ",(0,r.jsx)(s.strong,{children:"Ruta A o B"})," y dejar rastro en logs. "]}),"\n",(0,r.jsx)(s.li,{children:"No centrar CB/RIPTE e IPC/RIPTE \u2192 intercepto poco interpretable. "}),"\n",(0,r.jsxs)(s.li,{children:["Confluir ",(0,r.jsx)(s.em,{children:"conteo"})," y ",(0,r.jsx)(s.em,{children:"tasa"})," de pobreza sin escalar \u2192 coeficientes sin sentido."]}),"\n",(0,r.jsx)(s.li,{children:"Omitir la trazabilidad temporal \u2192 dif\xedcil comparar runs."}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"9-referencias-cruzadas",children:"9) Referencias cruzadas"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Temporal toolkit"})," (alineaci\xf3n M\u2194Q, desestacionalizaci\xf3n b\xe1sica)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Cat\xe1logo"})," (definiciones de m\xe9tricas) y ",(0,r.jsx)(s.strong,{children:"DBML"})," (claves y granularidades)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ETL JSON"})," (contratos de exportaci\xf3n y merges jer\xe1rquicos)."]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const r={},a=i.createContext(r);function o(e){const s=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);
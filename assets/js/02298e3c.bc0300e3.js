"use strict";(self.webpackChunkatlas_site=self.webpackChunkatlas_site||[]).push([[1613],{3531:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"referencia/geo/referencia_geometrias_geoespaciales","title":"","description":"L\xedmites geoespaciales de provincias, departamentos y fracciones para la Argentina. Estos insumos son la base de:","source":"@site/docs/referencia/geo/geometrias_geoespaciales.md","sourceDirName":"referencia/geo","slug":"/referencia/geo/geometrias_geoespaciales","permalink":"/atlas-site/docs/referencia/geo/geometrias_geoespaciales","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"geo","permalink":"/atlas-site/docs/tags/geo"},{"inline":true,"label":"ign","permalink":"/atlas-site/docs/tags/ign"},{"inline":true,"label":"conicet","permalink":"/atlas-site/docs/tags/conicet"},{"inline":true,"label":"shapefiles","permalink":"/atlas-site/docs/tags/shapefiles"},{"inline":true,"label":"geojson","permalink":"/atlas-site/docs/tags/geojson"},{"inline":true,"label":"claves","permalink":"/atlas-site/docs/tags/claves"},{"inline":true,"label":"crs","permalink":"/atlas-site/docs/tags/crs"}],"version":"current","frontMatter":{"id":"referencia_geometrias_geoespaciales","title":"","Geometr\xedas geoespaciales":"provincias, departamentos, fracciones\\"\\"","slug":"/referencia/geo/geometrias_geoespaciales","module":"referencia-geo","version":"0.2.0","status":"draft","owners":["atlas-core"],"tags":["geo","ign","conicet","shapefiles","geojson","claves","crs"],"source_repo":"<repo-url>","source_path":"docs/referencia/geo/geometrias_geoespaciales.mdx","schema_ref":"/downloads/atlas.dbml#hogares_geo","time_grain":"A","join_policy":"Geo anual. Joins con hechos trimestrales via YEAR = year(Q) y adaptador temporal."},"sidebar":"tutorialSidebar","previous":{"title":"Geo","permalink":"/atlas-site/docs/category/geo"},"next":{"title":"Operaci\xf3n","permalink":"/atlas-site/docs/category/operaci\xf3n"}}');var a=s(4848),r=s(8453);const o={id:"referencia_geometrias_geoespaciales",title:"","Geometr\xedas geoespaciales":'provincias, departamentos, fracciones""',slug:"/referencia/geo/geometrias_geoespaciales",module:"referencia-geo",version:"0.2.0",status:"draft",owners:["atlas-core"],tags:["geo","ign","conicet","shapefiles","geojson","claves","crs"],source_repo:"<repo-url>",source_path:"docs/referencia/geo/geometrias_geoespaciales.mdx",schema_ref:"/downloads/atlas.dbml#hogares_geo",time_grain:"A",join_policy:"Geo anual. Joins con hechos trimestrales via YEAR = year(Q) y adaptador temporal."},c=void 0,l={},d=[{value:"Fuentes y rutas esperadas",id:"fuentes-y-rutas-esperadas",level:2},{value:"Variables clave y tipos",id:"variables-clave-y-tipos",level:2},{value:"Claves de uni\xf3n con el Atlas",id:"claves-de-uni\xf3n-con-el-atlas",level:2},{value:"Especificaci\xf3n de claves compuestas",id:"especificaci\xf3n-de-claves-compuestas",level:3},{value:"Pol\xedtica CRS y reproyecci\xf3n",id:"pol\xedtica-crs-y-reproyecci\xf3n",level:2},{value:"Contrato de exportaci\xf3n",id:"contrato-de-exportaci\xf3n",level:2},{value:"Pipeline m\xednimo sugerido",id:"pipeline-m\xednimo-sugerido",level:2},{value:"QA de integridad y topolog\xeda",id:"qa-de-integridad-y-topolog\xeda",level:2},{value:"Uso en Atlas",id:"uso-en-atlas",level:2},{value:"Ejemplo de join y export (pseudoc\xf3digo)",id:"ejemplo-de-join-y-export-pseudoc\xf3digo",level:2},{value:"Errores comunes y c\xf3mo evitarlos",id:"errores-comunes-y-c\xf3mo-evitarlos",level:2},{value:"Licencia y citaci\xf3n",id:"licencia-y-citaci\xf3n",level:2},{value:"Pendientes",id:"pendientes",level:2}];function t(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"L\xedmites geoespaciales de provincias, departamentos y fracciones para la Argentina. Estos insumos son la base de:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["uni\xf3n con ",(0,a.jsx)(n.code,{children:"hogares_geo"})," y ",(0,a.jsx)(n.code,{children:"personas_geo"})]}),"\n",(0,a.jsx)(n.li,{children:"generaci\xf3n de GeoJSON por nivel para visualizaci\xf3n y agregaciones territoriales"}),"\n",(0,a.jsx)(n.li,{children:"c\xf3mputo de m\xe9tricas por recorte espacial"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"fuentes-y-rutas-esperadas",children:"Fuentes y rutas esperadas"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Provincias: ",(0,a.jsx)(n.code,{children:"./../../geoespacial-censo-IGN/IGN_shp/ign_provincia"})]}),"\n",(0,a.jsxs)(n.li,{children:["Departamentos: ",(0,a.jsx)(n.code,{children:"./../../geoespacial-censo-IGN/censos_shp_CONICET_dissolved/dptos_2010.shp"})]}),"\n",(0,a.jsxs)(n.li,{children:["Fracciones: ",(0,a.jsx)(n.code,{children:"./../../geoespacial-censo-IGN/censos_shp_CONICET_dissolved/fracs_2010.shp"})]}),"\n"]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Nota: mantener estas rutas como variables de configuraci\xf3n del build si difieren entre ambientes."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"variables-clave-y-tipos",children:"Variables clave y tipos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"PROV"})," int64. C\xf3digo de provincia."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"DPTO"})," int64. C\xf3digo de departamento."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"IDFRAC"})," string. Identificador compuesto de fracci\xf3n."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"geometry"})," geometry. Multipolygon o polygon seg\xfan capa."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"area_km2"})," float64. \xc1rea de la divisi\xf3n en km\xb2."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Atributos adicionales presentes en ciertas capas (p. ej. provincias) como ",(0,a.jsx)(n.code,{children:"OBJECTID, Entidad, Objeto, FNA, GNA, NAM, SAG, FDC, IN1, SHAPE_STAr, SHAPE_STLe"})," no son parte del contrato b\xe1sico. Documentar solo si se usan."]}),"\n",(0,a.jsx)(n.h2,{id:"claves-de-uni\xf3n-con-el-atlas",children:"Claves de uni\xf3n con el Atlas"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Con ",(0,a.jsx)(n.code,{children:"hogares_geo"})," y ",(0,a.jsx)(n.code,{children:"personas_geo"}),":","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["nivel provincia: ",(0,a.jsx)(n.code,{children:"PROV"})]}),"\n",(0,a.jsxs)(n.li,{children:["nivel departamento: ",(0,a.jsx)(n.code,{children:"PROV + DPTO"})]}),"\n",(0,a.jsxs)(n.li,{children:["nivel fracci\xf3n: ",(0,a.jsx)(n.code,{children:"IDFRAC"})," (definici\xf3n exacta abajo)"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Pol\xedtica temporal: geo es anual. Al unir con hechos trimestrales (",(0,a.jsx)(n.code,{children:"Q"}),") usar adaptador ",(0,a.jsx)(n.code,{children:"YEAR = year(Q)"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"especificaci\xf3n-de-claves-compuestas",children:"Especificaci\xf3n de claves compuestas"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"IDFRAC"}),": construir a partir de c\xf3digos normalizados de provincia, departamento y fracci\xf3n.","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Reglas de padding y longitudes fijas: completar con la especificaci\xf3n de normalizaci\xf3n de c\xf3digos (ver \u201cNormalizaci\xf3n de c\xf3digos y casos especiales\u201d en CoreRef)."}),"\n",(0,a.jsxs)(n.li,{children:["Validar unicidad de ",(0,a.jsx)(n.code,{children:"IDFRAC"})," por a\xf1o."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"pol\xedtica-crs-y-reproyecci\xf3n",children:"Pol\xedtica CRS y reproyecci\xf3n"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["CRS can\xf3nico para publicaci\xf3n de GeoJSON: ",(0,a.jsx)(n.strong,{children:"definir aqu\xed"})," (recomendado WGS84 EPSG:4326 para web)."]}),"\n",(0,a.jsxs)(n.li,{children:["Capa fuente puede venir en CRS proyectado. Reproyectar a CRS can\xf3nico antes de:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["c\xe1lculo de ",(0,a.jsx)(n.code,{children:"area_km2"})," (hacerlo en CRS proyectado m\xe9trico, no geogr\xe1fico)"]}),"\n",(0,a.jsx)(n.li,{children:"serializaci\xf3n a GeoJSON"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:"Declarar CRS en metadatos de exportaci\xf3n. Fallar el build si falta."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"contrato-de-exportaci\xf3n",children:"Contrato de exportaci\xf3n"}),"\n",(0,a.jsx)(n.p,{children:"Exportables can\xf3nicos por nivel y a\xf1o:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'exports:\n  - path: /exports/geo_provincias_2010.geojson\n    sha256: "<sha256-prov-2010>"\n    crs: "EPSG:<definir>"\n    features: "<n>"\n  - path: /exports/geo_departamentos_2010.geojson\n    sha256: "<sha256-dpto-2010>"\n    crs: "EPSG:<definir>"\n    features: "<n>"\n  - path: /exports/geo_fracciones_2010.geojson\n    sha256: "<sha256-frac-2010>"\n    crs: "EPSG:<definir>"\n    features: "<n>"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Reglas:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"codificaci\xf3n UTF-8"}),"\n",(0,a.jsx)(n.li,{children:"precisi\xf3n de coordenadas configurable (p. ej. 6 decimales)"}),"\n",(0,a.jsx)(n.li,{children:"validaci\xf3n de geometr\xedas antes de exportar (repair m\xednimo si es necesario)"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"pipeline-m\xednimo-sugerido",children:"Pipeline m\xednimo sugerido"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Leer shapefiles de IGN/CONICET."}),"\n",(0,a.jsx)(n.li,{children:"Verificar CRS y reprojectar a CRS can\xf3nico."}),"\n",(0,a.jsxs)(n.li,{children:["Normalizar c\xf3digos (",(0,a.jsx)(n.code,{children:"PROV"}),", ",(0,a.jsx)(n.code,{children:"DPTO"}),") y construir ",(0,a.jsx)(n.code,{children:"IDFRAC"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Calcular ",(0,a.jsx)(n.code,{children:"area_km2"})," en CRS proyectado m\xe9trico."]}),"\n",(0,a.jsx)(n.li,{children:"QAs topol\xf3gicos. Ver secci\xf3n QA."}),"\n",(0,a.jsx)(n.li,{children:"Serializar a GeoJSON con propiedades m\xednimas y metadatos de origen."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"qa-de-integridad-y-topolog\xeda",children:"QA de integridad y topolog\xeda"}),"\n",(0,a.jsx)(n.p,{children:"Fallar el build si:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Geometr\xedas inv\xe1lidas sin reparar: usar ",(0,a.jsx)(n.code,{children:"buffer(0)"})," o ",(0,a.jsx)(n.code,{children:"make_valid"})," y reintentar."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Self-intersections o rings mal orientados que impidan el dissolve."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Huecos extremadamente peque\xf1os que generen slivers tras disolver."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Duplicados de clave:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"uniq(PROV)"})," en provincias"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"uniq(PROV, DPTO)"})," en departamentos"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"uniq(IDFRAC)"})," en fracciones"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"area_km2"})," no positiva o fuera de rango razonable por nivel."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["CRS ausente o inconsistente con el declarado en ",(0,a.jsx)(n.code,{children:"exports"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Checks recomendados:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Diferencias de bounding box respecto a expectativas por nivel."}),"\n",(0,a.jsx)(n.li,{children:"Intersecciones entre pol\xedgonos del mismo nivel (no deber\xedan solaparse)."}),"\n",(0,a.jsxs)(n.li,{children:["Suma de ",(0,a.jsx)(n.code,{children:"area_km2"})," por nivel frente a benchmark nacional."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"uso-en-atlas",children:"Uso en Atlas"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Uni\xf3n con ",(0,a.jsx)(n.code,{children:"hogares_geo"})," para enriquecer m\xe9tricas:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["anual: ",(0,a.jsx)(n.code,{children:"hogares_geo.YEAR"})," debe coincidir con el a\xf1o de la capa"]}),"\n",(0,a.jsxs)(n.li,{children:["trimestral: usar ",(0,a.jsx)(n.code,{children:"YEAR = year(Q)"})," en joins con hechos"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Generaci\xf3n de GeoJSON con m\xe9tricas: agregar columnas de indicadores y exportar a ",(0,a.jsx)(n.code,{children:"downloads/"})," o ",(0,a.jsx)(n.code,{children:"exports/"})," seg\xfan pol\xedtica de publicaci\xf3n."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"ejemplo-de-join-y-export-pseudoc\xf3digo",children:"Ejemplo de join y export (pseudoc\xf3digo)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# geopandas\ng = geopandas.read_file("/exports/geo_departamentos_2010.geojson")\nh = pandas.read_parquet("/exports/hogares_geo_2010.parquet")\nagg = (pobreza_hogares\n       .assign(YEAR=lambda d: d["Q"].dt.year)\n       .merge(h[["HOGAR_REF_ID","YEAR","PROV","DPTO"]],\n              on=["HOGAR_REF_ID","YEAR"], how="left")\n       .groupby(["PROV","DPTO","YEAR"], as_index=False)\n       .agg(tasa_pobreza=("Pobreza","mean"), n=("HOGAR_REF_ID","size")))\nout = g.merge(agg, on=["PROV","DPTO"], how="left")\nout.to_file("/exports/mapa_dpto_pobreza_2010.geojson", driver="GeoJSON")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"errores-comunes-y-c\xf3mo-evitarlos",children:"Errores comunes y c\xf3mo evitarlos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Usar CRS geogr\xe1fico para \xe1reas. Calcular ",(0,a.jsx)(n.code,{children:"area_km2"})," en CRS proyectado m\xe9trico."]}),"\n",(0,a.jsx)(n.li,{children:"Mezclar granularidad anual con trimestral sin adaptador temporal."}),"\n",(0,a.jsx)(n.li,{children:"No fijar padding y normalizaci\xf3n de c\xf3digos y luego fallar joins por strings incompatibles."}),"\n",(0,a.jsx)(n.li,{children:"Exportar GeoJSON con demasiada precisi\xf3n o sin simplificaci\xf3n controlada, lo que infla el tama\xf1o y afecta rendimiento."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"licencia-y-citaci\xf3n",children:"Licencia y citaci\xf3n"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Indicar organismo proveedor, a\xf1o de referencia y t\xe9rminos de uso (IGN, CONICET)."}),"\n",(0,a.jsx)(n.li,{children:"Recomendar citar la fuente y el hash del archivo exportado."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"pendientes",children:"Pendientes"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Completar CRS can\xf3nico exacto."}),"\n",(0,a.jsxs)(n.li,{children:["Documentar padding y formato de ",(0,a.jsx)(n.code,{children:"IDFRAC"})," con ejemplos reproducibles."]}),"\n",(0,a.jsxs)(n.li,{children:["A\xf1adir checksums reales en ",(0,a.jsx)(n.code,{children:"exports"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\n\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(6540);const a={},r=i.createContext(a);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);
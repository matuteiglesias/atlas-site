"use strict";(self.webpackChunkatlas_site=self.webpackChunkatlas_site||[]).push([[9252],{7960:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"metodos/metodos_notebooks_estructura_refactor","title":"Notebooks & refactor \u2014 estructura, modularizaci\xf3n y contratos","description":"Gu\xeda para estandarizar c\xf3mo escribimos notebooks (secciones y orden), c\xf3mo extraemos funciones a m\xf3dulos sin globales y c\xf3mo documentamos entradas/salidas alineadas al Cat\xe1logo y al DBML. El objetivo: reproducibilidad, menor deuda t\xe9cnica y onboarding r\xe1pido.","source":"@site/docs/metodos/notebooks_estructura_refactor.md","sourceDirName":"metodos","slug":"/metodos/notebooks_estructura_refactor","permalink":"/atlas-site/docs/metodos/notebooks_estructura_refactor","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/metodos/notebooks_estructura_refactor.md","tags":[{"inline":true,"label":"notebooks","permalink":"/atlas-site/docs/tags/notebooks"},{"inline":true,"label":"refactor","permalink":"/atlas-site/docs/tags/refactor"},{"inline":true,"label":"modularizacion","permalink":"/atlas-site/docs/tags/modularizacion"},{"inline":true,"label":"etl","permalink":"/atlas-site/docs/tags/etl"},{"inline":true,"label":"catalogo","permalink":"/atlas-site/docs/tags/catalogo"}],"version":"current","frontMatter":{"id":"metodos_notebooks_estructura_refactor","title":"Notebooks & refactor \u2014 estructura, modularizaci\xf3n y contratos","slug":"/metodos/notebooks_estructura_refactor","module":"metodos","version":"0.1.0","status":"draft","owners":["atlas-core"],"tags":["notebooks","refactor","modularizacion","etl","catalogo"],"source_repo":"<repo-url>","source_path":"docs/metodos/notebooks_estructura_refactor.md"},"sidebar":"tutorialSidebar","previous":{"title":"Modeling toolkit \u2014 regresi\xf3n lineal simple para pobreza","permalink":"/atlas-site/docs/metodos/modeling_toolkit_pobreza"},"next":{"title":"temporal_toolkit","permalink":"/atlas-site/docs/metodos/temporal_toolkit"}}');var o=n(4848),a=n(8453);const i={id:"metodos_notebooks_estructura_refactor",title:"Notebooks & refactor \u2014 estructura, modularizaci\xf3n y contratos",slug:"/metodos/notebooks_estructura_refactor",module:"metodos",version:"0.1.0",status:"draft",owners:["atlas-core"],tags:["notebooks","refactor","modularizacion","etl","catalogo"],source_repo:"<repo-url>",source_path:"docs/metodos/notebooks_estructura_refactor.md"},t=void 0,l={},d=[{value:"1) Estructura m\xednima de un notebook (plantilla)",id:"1-estructura-m\xednima-de-un-notebook-plantilla",level:2},{value:"2) Contratos m\xednimos por tipo de notebook",id:"2-contratos-m\xednimos-por-tipo-de-notebook",level:2},{value:"A. Preprocesamiento",id:"a-preprocesamiento",level:3},{value:"B. Transformaci\xf3n (Ingresos \u2194 Pobreza)",id:"b-transformaci\xf3n-ingresos--pobreza",level:3},{value:"C. S\xedntesis &amp; Export",id:"c-s\xedntesis--export",level:3},{value:"3) Modularizaci\xf3n real (sin <em>globals</em>)",id:"3-modularizaci\xf3n-real-sin-globals",level:2},{value:"4) Refactor de funciones de transformaci\xf3n (criterios)",id:"4-refactor-de-funciones-de-transformaci\xf3n-criterios",level:2},{value:"5) Organizaci\xf3n del proyecto: notebooks \u2194 m\xf3dulos",id:"5-organizaci\xf3n-del-proyecto-notebooks--m\xf3dulos",level:2},{value:"6) Documentaci\xf3n de datasets (vincular a Cat\xe1logo/DBML)",id:"6-documentaci\xf3n-de-datasets-vincular-a-cat\xe1logodbml",level:2},{value:"7) QA, reproducibilidad y CI (checklist)",id:"7-qa-reproducibilidad-y-ci-checklist",level:2},{value:"8) Plantillas r\xe1pidas (para pegar)",id:"8-plantillas-r\xe1pidas-para-pegar",level:2},{value:"8.1. Header est\xe1ndar del proyecto",id:"81-header-est\xe1ndar-del-proyecto",level:3},{value:"8.2. Contrato IES dentro del notebook",id:"82-contrato-ies-dentro-del-notebook",level:3},{value:"8.3. Cierre con hash y log",id:"83-cierre-con-hash-y-log",level:3},{value:"9) Errores t\xedpicos (y c\xf3mo evitarlos)",id:"9-errores-t\xedpicos-y-c\xf3mo-evitarlos",level:2}];function c(e){const s={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["Gu\xeda para estandarizar ",(0,o.jsx)(s.strong,{children:"c\xf3mo escribimos notebooks"})," (secciones y orden), ",(0,o.jsx)(s.strong,{children:"c\xf3mo extraemos funciones a m\xf3dulos"})," sin globales y ",(0,o.jsx)(s.strong,{children:"c\xf3mo documentamos entradas/salidas"})," alineadas al Cat\xe1logo y al DBML. El objetivo: reproducibilidad, menor deuda t\xe9cnica y onboarding r\xe1pido."]}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"1-estructura-m\xednima-de-un-notebook-plantilla",children:"1) Estructura m\xednima de un notebook (plantilla)"}),"\n",(0,o.jsx)(s.p,{children:"Us\xe1 siempre las mismas secciones, en este orden:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Imports & entorno"}),": librer\xedas, seed, paths base."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Par\xe1metros & config"}),": a\xf1o/trimestre (",(0,o.jsx)(s.code,{children:"Q"}),"), ",(0,o.jsx)(s.code,{children:"frac"}),", rutas."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Carga de datos"}),": fuentes externas/internas."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Preprocesamiento"}),": limpieza, tipado, normalizaciones."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Transformaciones"}),": pasos nucleares (ETL/modelado)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"S\xedntesis y QA"}),": checks de cardinalidades, NaN, rangos."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Exportes"}),": escritura de artefactos (con ",(0,o.jsx)(s.em,{children:"naming"})," y checksum)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Registro"}),": tiempo de corrida, ",(0,o.jsx)(s.code,{children:"source_repo@commit"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Esta organizaci\xf3n aparece en tus notas como \u201cestructura l\xf3gica de celdas\u201d y \u201cframework por cuadernos\u201d (preprocesamiento \u2192 principal \u2192 polis geo \u2192 guardar), \xfatil para seguir un ",(0,o.jsx)(s.strong,{children:"pipeline"})," lineal y legible. "]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Snippets de cabecera (recomendado):"})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'# 1) Imports & entorno\nimport os, sys, json, datetime as dt\nimport numpy as np, pandas as pd\nnp.random.seed(123)\n\n# 2) Par\xe1metros & config\nYEAR = 2019\nQ = "2019Q1"\nFRAC = 0.005\nRESULTS_PATH = "../results"\n\n# 3) Carga\n# df = pd.read_csv(...)\n\n# 4) Preprocesamiento\n# ...\n\n# 5) Transformaciones (llamadas a funciones del m\xf3dulo /packages)\n# ...\n\n# 6) QA\n# assert df.notna().all().all()\n\n# 7) Exportes\n# df.to_csv(...)\n\n# 8) Registro\nprint("done", dt.datetime.utcnow().isoformat(), "Z")\n'})}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"2-contratos-m\xednimos-por-tipo-de-notebook",children:"2) Contratos m\xednimos por tipo de notebook"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Regla"}),": todo notebook debe declarar su ",(0,o.jsx)(s.strong,{children:"Contrato de Entradas/Salidas"})," (IES)."]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"a-preprocesamiento",children:"A. Preprocesamiento"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Entradas"}),": rutas a fuentes crudas (EPH/Censo/Geo), ",(0,o.jsx)(s.em,{children:"schemas"})," esperados, filtros."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Salidas"}),": tablas normalizadas (tipos, claves), ",(0,o.jsx)(s.em,{children:"path"})," temporal."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"QA"}),": columnas obligatorias presentes, dominios v\xe1lidos, tama\xf1o > 0.\n",(0,o.jsx)(s.strong,{children:"Motivo"}),": separar IO/limpieza del resto del pipeline (reduce ruido y repetici\xf3n). "]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"b-transformaci\xf3n-ingresos--pobreza",children:"B. Transformaci\xf3n (Ingresos \u2194 Pobreza)"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Entradas"}),": datasets preprocesados + par\xe1metros (p. ej., escalas, deflactores)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Salidas"}),": tablas conformes a DBML (p. ej., ",(0,o.jsx)(s.code,{children:"personas_ingresos_Q"}),", ",(0,o.jsx)(s.code,{children:"pobreza_hogares"}),")."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"QA"}),": cardinalidades de joins, ausencia de globales, funciones puras.\n",(0,o.jsx)(s.strong,{children:"Motivo"}),": extraer funciones recurrentes a m\xf3dulos y pasar dependencias por argumentos.  "]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"c-s\xedntesis--export",children:"C. S\xedntesis & Export"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Entradas"}),": data consolidada; ",(0,o.jsx)(s.code,{children:"grouper[]"})," y specs de agregaci\xf3n."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Salidas"}),": JSON/CSV ",(0,o.jsx)(s.strong,{children:"con contrato publicado"})," (ver p\xe1ginas de ",(0,o.jsx)(s.em,{children:"results_path"})," y JSON)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"QA"}),": ",(0,o.jsx)(s.code,{children:"sha256"}),", tama\xf1os esperados, ausencia de ",(0,o.jsx)(s.code,{children:"Timestamp"})," crudo en JSON.\n",(0,o.jsx)(s.strong,{children:"Motivo"}),": uniformidad de exports para front-ends y reproducibilidad. "]}),"\n"]}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsxs)(s.h2,{id:"3-modularizaci\xf3n-real-sin-globals",children:["3) Modularizaci\xf3n real (sin ",(0,o.jsx)(s.em,{children:"globals"}),")"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Problema"}),": funciones que dependen de variables globales (p. ej., ",(0,o.jsx)(s.code,{children:"ad_eq"}),", ",(0,o.jsx)(s.code,{children:"DPTO_Region"}),", ",(0,o.jsx)(s.code,{children:"CB_ipc"}),") da\xf1an la reutilizaci\xf3n y el testeo.\n",(0,o.jsx)(s.strong,{children:"Pol\xedtica"}),": ",(0,o.jsx)(s.strong,{children:"todas"})," las dependencias entran como ",(0,o.jsx)(s.strong,{children:"argumentos"})," de funci\xf3n; nada lee del ",(0,o.jsx)(s.em,{children:"scope"})," global del notebook. Ejemplos en tus apuntes (refactor de ",(0,o.jsx)(s.code,{children:"canasta"}),", ",(0,o.jsx)(s.code,{children:"geo_hogares"}),", etc.). "]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Antes (antipatr\xf3n)"})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"# usa ad_eq, DPTO_Region globales\ndef canasta(df):\n    return df.merge(ad_eq).merge(DPTO_Region)\n"})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Despu\xe9s (correcto)"})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'def canasta(df, ad_eq, dpto_region, cb_ipc):\n    out = df.merge(ad_eq).merge(dpto_region).merge(cb_ipc)\n    out["CBA"] *= out["CB_EQUIV"]\n    out["CBT"] *= out["CB_EQUIV"]\n    return out\n'})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Beneficio: funciones ",(0,o.jsx)(s.strong,{children:"puras"}),", f\xe1ciles de mover a ",(0,o.jsx)(s.code,{children:"funciones.py"})," / paquete, con tests directos. "]}),"\n"]}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"4-refactor-de-funciones-de-transformaci\xf3n-criterios",children:"4) Refactor de funciones de transformaci\xf3n (criterios)"}),"\n",(0,o.jsx)(s.p,{children:"Gu\xeda para desarmar \u201csuper-funciones\u201d en piezas testeables (tu doc 0222):"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Dividir por responsabilidad"}),": educaci\xf3n/codificaci\xf3n, c\xe1lculo de pobreza, merges, guardado. "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsxs)(s.strong,{children:["Evitar ",(0,o.jsx)(s.em,{children:"hard-coding"})]}),": mappings y reglas a ",(0,o.jsx)(s.strong,{children:"YAML/JSON"})," o par\xe1metros. "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Legibilidad"}),": docstrings, nombres claros, comentarios en pasos no obvios. "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Errores controlados"}),": ",(0,o.jsx)(s.code,{children:"try/except"})," con mensajes y contexto (columna/fase). "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Vectorizar cuando se pueda"})," y revisar \xedndices/joins para performance. "]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Esqueleto sugerido"})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'def transform_ingresos(df, cfg):\n    df1 = recod_educacion(df, cfg["map_educ"])          # sin hard-coding\n    df2 = merge_geo(df1, cfg["geo_paths"])\n    df3 = compute_poverty(df2, cfg["poverty_params"])\n    return df3\n'})}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"5-organizaci\xf3n-del-proyecto-notebooks--m\xf3dulos",children:"5) Organizaci\xf3n del proyecto: notebooks \u2194 m\xf3dulos"}),"\n",(0,o.jsx)(s.p,{children:"Tus notas proponen dos variantes; ambas v\xe1lidas, con trade-offs:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsxs)(s.strong,{children:["Monol\xedtico ",(0,o.jsx)(s.code,{children:"analysis_functions.py"})]}),": r\xe1pido de armar, escala limitado. "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsxs)(s.strong,{children:["Modular (",(0,o.jsx)(s.code,{children:"modules/preprocessing.py"}),", ",(0,o.jsx)(s.code,{children:"income_transformation.py"}),", \u2026)"]}),": mejor separaci\xf3n y testeo; preferido si crece. "]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Reglas comunes"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Importar ",(0,o.jsx)(s.strong,{children:"siempre"})," desde m\xf3dulos; el notebook solo ",(0,o.jsx)(s.strong,{children:"orquesta"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Rutas y nombres de archivo como ",(0,o.jsx)(s.strong,{children:"par\xe1metros"})," (no literales en funciones)."]}),"\n",(0,o.jsx)(s.li,{children:"Tests r\xe1pidos para cada m\xf3dulo cr\xedtico (ver \xa77)."}),"\n"]}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"6-documentaci\xf3n-de-datasets-vincular-a-cat\xe1logodbml",children:"6) Documentaci\xf3n de datasets (vincular a Cat\xe1logo/DBML)"}),"\n",(0,o.jsx)(s.p,{children:"No dupliques definiciones en notebooks. Para cada output:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Apuntar a la ficha"})," del Cat\xe1logo (nombres, columnas m\xednimas, ",(0,o.jsx)(s.code,{children:"sha256"}),")."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Respetar DBML"})," para claves/relaciones (hogar/persona/geo)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Mantener un \xedndice"})," de \u201cinputs/outputs\u201d por notebook que referencie fichas relevantes.\nEsto ya est\xe1 sugerido en tu material de ",(0,o.jsx)(s.strong,{children:"estructura de conjuntos de datos"}),": separar \u201cFuentes de datos\u201d vs \u201cBases derivadas\u201d, y normalizar encabezados. "]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Mini-\xedndice (ejemplo)"})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-md",children:"### Outputs de este notebook\n- personas_ingresos_Q \u2192 ver /catalogo/personas_ingresos_Q\n- pobreza_hogares_Q \u2192 ver /catalogo/pobreza_hogares_metricas\n"})}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"7-qa-reproducibilidad-y-ci-checklist",children:"7) QA, reproducibilidad y CI (checklist)"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Determinismo"}),": fijar semillas; registrar ",(0,o.jsx)(s.code,{children:"source_repo@commit"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Contratos IES"})," presentes y completos."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Sin NaN inesperados"})," en claves/medidas tras cada merge."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Sin globales"}),": linterna simple que escanee funciones y alerte usos de variables externas."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Tiempo & memoria"}),": log por fase (carga, transform, export)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Doctests/pytest"}),": tests at\xf3micos para funciones extra\xeddas."]}),"\n"]}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"8-plantillas-r\xe1pidas-para-pegar",children:"8) Plantillas r\xe1pidas (para pegar)"}),"\n",(0,o.jsx)(s.h3,{id:"81-header-est\xe1ndar-del-proyecto",children:"8.1. Header est\xe1ndar del proyecto"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'# paths y seeds\nfrom pathlib import Path\nROOT = Path(__file__).resolve().parents[1]\nDATA = ROOT / "data"\nRESULTS = ROOT / "results"\nSEED = 123\n'})}),"\n",(0,o.jsx)(s.h3,{id:"82-contrato-ies-dentro-del-notebook",children:"8.2. Contrato IES dentro del notebook"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'IES = {\n  "inputs": ["EPH_personas.csv", "ad_eq.csv", "CB_ipc.parquet"],\n  "outputs": ["exports/pobreza_hogares_Q.csv"],\n  "depends_on": ["dbml_fuente_de_verdad", "pobreza_hogares_metricas"]\n}\nprint(json.dumps(IES, indent=2))\n'})}),"\n",(0,o.jsx)(s.h3,{id:"83-cierre-con-hash-y-log",children:"8.3. Cierre con hash y log"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'import hashlib, json\ndef sha256_file(path):\n    h=hashlib.sha256()\n    with open(path,\'rb\') as f:\n        for chunk in iter(lambda: f.read(8192), b\'\'):\n            h.update(chunk)\n    return h.hexdigest()\n\nout = RESULTS / "exports" / "pobreza_hogares_Q.csv"\nprint("sha256:", sha256_file(out))\nprint("commit:", os.environ.get("GIT_COMMIT","<unknown>"))\n'})}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h2,{id:"9-errores-t\xedpicos-y-c\xf3mo-evitarlos",children:"9) Errores t\xedpicos (y c\xf3mo evitarlos)"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Funciones que leen globales"})," \u2192 pas\xe1 deps por argumentos (ver \xa73). "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsxs)(s.strong,{children:["Transformaciones ",(0,o.jsx)(s.em,{children:"hard-coded"})]})," \u2192 externaliz\xe1 a config (YAML/JSON). "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Import/NameError"})," por m\xf3dulos mal ubicados/nombres repetidos \u2192 consolidar ",(0,o.jsx)(s.code,{children:"funciones.py"}),"/",(0,o.jsx)(s.code,{children:"modules/*"})," y reiniciar kernel al mover. "]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Estructuras de doc desparejas"})," \u2192 seguir la propuesta de encabezados uniformes para las secciones de datasets. "]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>t});var r=n(6540);const o={},a=r.createContext(o);function i(e){const s=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);